<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Gate AR Marker Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/arjs@3.4.2/aframe/build/aframe-ar.js"></script>
    <style>
      body { margin: 0; overflow: hidden; background: #111; }
      #start-ar {
        position: absolute; left: 50%; top: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem; padding: 1em 2em; border: none; background: #ff6600; color: #fff;
        border-radius: 8px; cursor: pointer; z-index: 20; box-shadow: 0 4px 24px #0008;
      }
      #instructions {
        position: absolute; top: 10px; left: 0; width: 100vw;
        text-align: center; color: #fff; background: rgba(0,0,0,0.4);
        z-index: 10; font-size: 1.1rem; padding: 0.5em;
      }
      #marker-img {
        max-width: 220px; margin: 1em auto; display: block; border:2px solid #fff;
        background: #fff;
      }
      #ar-scene { width: 100vw; height: 100vh; display: none; }
    </style>
  </head>
  <body>
    <button id="start-ar">Start AR</button>
    <div id="instructions">
      1. Allow camera access<br>
      2. Point your camera at this marker:<br>
      <img id="marker-img" src="assets/gate.png" alt="Gate marker"/>
    </div>
    <a-scene
      id="ar-scene"
      embedded
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
      renderer="logarithmicDepthBuffer: true;"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: true"
    >
      <!-- Use your custom marker -->
      <a-marker type="pattern" url="assets/pattern-gate.patt">
        <!-- Overlay: The same gate image, floating just above the marker -->
        <a-image src="assets/gate.png" position="0 0.5 0" width="1.6" height="0.76"></a-image>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
    <script>
      // Show AR scene only after user clicks start
      document.getElementById('start-ar').addEventListener('click', function() {
        document.getElementById('start-ar').style.display = 'none';
        document.getElementById('instructions').style.display = 'none';
        document.getElementById('ar-scene').style.display = 'block';
      });
    </script>
  </body>
</html>
